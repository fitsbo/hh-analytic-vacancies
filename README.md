# hh-analytic-vacancies
# Дашборд по вакансиям Аналитик с сайта HH.ru


### Цель проекта
Дашборд стал развитием дипломного проекта из курса SberUniversity Data Analyst. Изначальная идея пришла после просмотра подобного [дашборда от Романа Бунина](https://revealthedata.com/examples/hh/). Но дополнительным условием стало сравнение зарплат Аналитика со средней зарплатой по регионам России. Для этого были использованы данные РосСтата по средней зарплате. Для рассчёта средней ЗП по месяцам (начиная с 11.2023) использовалась аппроксимация методом Month-over-Month


### Методика сбора и обработки данных
* Данные парсились через публичный API HeadHunter
* Ключевые слова для поиска вакансий: ["analyst", "аналитик", "data", "дата", "dwh", "etl", "bi"]
* Поиск вакансий только по стране Россия
* Зарплаты указанные в валюте пересчитаны в рубли по курсу ЦБ на дату парсинга
* В вакансиях где указана только зарплата ОТ или ДО - считаем что вилка фиксирована
* Все зарпалты приведены к net


### Ссылки
[Данные Росстата по средней зарплате](https://rosstat.gov.ru/labor_market_employment_salaries)

[Геокоды регионов ISO3166](https://ru.wikipedia.org/wiki/ISO_3166-2:RU)

[Документация API HeadHunter](https://github.com/hhru/api)

### Файлы проекта
#### Основные
* create_tables.sql - схемы таблиц PostgreSQL
* main.py - главный файл парсера, запускает парсинг API, обработку полученных данных и загрузку их в БД
* postprocess_vacancies.py - постобработка вакансий перед загрузкой в БД: удаление дублей, приведение ЗП к общему виду, исправление названия региона
* insert_dicts.py - вставка в БД вспомогательных словарей
* region_avg_salary_mom.py - аппроксимация срених ЗП по регионам

#### Вспомогательные функции
* helpers/hh_api_requests.py - запросы к API HeadHunter
* helpers/hh_vacancy_parse.py -  парсинг JSON с данными, полученных из API
* helpers/db_helper.py - работа с БД
* helpers/df_files.py - работа с CSV
* helpers/logger.py - логирование
* helpers/misc_helpers.py - прочие функции

#### Словари
* dict/region_avg_salary.csv  исходные данные по средним зарплатам в регионах
* dict/region_avg_salary_renamed_predicted.csv  предсказанные данные по средним зарплатам в регионах, с исправлением названий регионов
* dict/fix_regions.csv - список регионов и их альтернативных названий из различных источников, для приведения к единому виду
* dict/cities.csv - категоризация городов
* dict/region.csv - список регионов, округов и геокодов
